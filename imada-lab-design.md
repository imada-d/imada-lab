# imada-labコーポレートサイト 設計書

## プロジェクト概要

### 目的
- imada-labが開発する各種サービスを紹介するポートフォリオサイト
- 個人プロジェクトとして運営
- シンプルで目的が明確なサイト構成

### 対象ユーザー
- imada-labのサービスに興味を持つ潜在ユーザー
- 各サービス(PoleNavi、電気屋マイスター)について知りたい人
- 問い合わせをしたい人

---

## サイト構成

### ページ一覧
1. **トップページ** (`/`)
   - 2つのサービスカードを表示
   - クリックで各サービスの本サイトに遷移

2. **お問い合わせページ** (`/contact`)
   - お問い合わせフォーム
   - 送信完了後のフィードバック表示

3. **プライバシーポリシーページ** (`/privacy`)
   - 内容は後から作成

4. **利用規約ページ** (`/terms`)
   - 内容は後から作成

### ナビゲーション
- **ヘッダー**
  - ロゴ: imada-lab
  - メニュー: 「サービス」(トップへ)、「お問い合わせ」

- **フッター**
  - Copyright © 2025 imada-lab
  - リンク: プライバシーポリシー、利用規約

---

## 1. トップページ

### レイアウト
```
+------------------------------------------+
|  Header: [Logo] [サービス] [お問い合わせ]  |
+------------------------------------------+
|                                          |
|            imada-lab                     |
|     電気工事業界向けサービス開発              |
|                                          |
|  +------------------+  +---------------+ |
|  |   PoleNavi      |  | 電気屋マイスター | |
|  |   [画像]         |  |   [画像]       | |
|  |   説明文         |  |   説明文       | |
|  |  [詳しく見る →] |  | [詳しく見る →] | |
|  +------------------+  +---------------+ |
|                                          |
+------------------------------------------+
|  Footer: Copyright / リンク               |
+------------------------------------------+
```

### サービスカード仕様

#### PoleNaviカード
- **タイトル**: PoleNavi
- **サブタイトル**: 電柱位置共有アプリ
- **説明文**: 日本初の電柱番号から位置を検索できる無料アプリ。自治体職員や電気工事業者向けに、電柱の位置情報をクラウドソーシングで共有。
- **リンク先**: https://polenavi.com
- **画像**: PoleNaviのスクリーンショットまたはロゴ

#### 電気屋マイスターカード
- **タイトル**: 電気屋マイスター
- **サブタイトル**: 電気工事の学習サイト＆アプリ
- **説明文**: 電気工事の基礎から応用まで学べる情報サイト。現場で使える計算アプリも開発中(iOS開発中、Android βテスト中)。
- **リンク先**: https://denkiya-meister.com
- **画像**: 電気屋マイスターのスクリーンショットまたはロゴ

### デザイン方針
- シンプルでモダンなデザイン
- カードは2列(PC)、1列(モバイル)で配置
- ホバー時にカードが浮き上がるアニメーション
- レスポンシブデザイン必須

---

## 2. お問い合わせページ

### フォーム項目

| 項目名 | 必須 | バリデーション |
|--------|------|----------------|
| お名前 | ○ | 1文字以上 |
| メールアドレス | ○ | メール形式 |
| 件名 | ○ | 1文字以上 |
| お問い合わせ内容 | ○ | 10文字以上 |

### 送信処理
1. フォームバリデーション(フロントエンド)
2. APIエンドポイントに送信: `POST /api/imada-lab/contact`
3. バックエンドでResend APIを使用してメール送信
4. 送信先: `contact@imada-lab.com`
5. 送信成功時: フォームの下に成功メッセージ表示
6. 送信失敗時: エラーメッセージ表示

### メール内容(バックエンドが送信)
```
件名: [imada-lab お問い合わせ] {件名}

お名前: {お名前}
メールアドレス: {メールアドレス}
件名: {件名}

お問い合わせ内容:
{お問い合わせ内容}

---
送信日時: {タイムスタンプ}
```

### レイアウト
```
+------------------------------------------+
|  Header                                  |
+------------------------------------------+
|                                          |
|         お問い合わせ                       |
|                                          |
|  +------------------------------------+  |
|  | お名前                              |  |
|  | [__________________________]       |  |
|  |                                    |  |
|  | メールアドレス                       |  |
|  | [__________________________]       |  |
|  |                                    |  |
|  | 件名                                |  |
|  | [__________________________]       |  |
|  |                                    |  |
|  | お問い合わせ内容                     |  |
|  | [__________________________]       |  |
|  | [                            ]     |  |
|  | [                            ]     |  |
|  |                                    |  |
|  |              [送信]                 |  |
|  +------------------------------------+  |
|                                          |
+------------------------------------------+
|  Footer                                  |
+------------------------------------------+
```

---

## 3. プライバシーポリシーページ

### 構成
- ページタイトル: プライバシーポリシー
- 内容: **後から作成** (とりあえず「準備中」と表示)
- レイアウト: シンプルなテキストページ

---

## 4. 利用規約ページ

### 構成
- ページタイトル: 利用規約
- 内容: **後から作成** (とりあえず「準備中」と表示)
- レイアウト: シンプルなテキストページ

---

## 技術仕様

### フロントエンド
- **フレームワーク**: React 19.1.1
- **言語**: TypeScript
- **ビルドツール**: Vite
- **スタイリング**: CSS Modules または Tailwind CSS(PoleNaviと合わせる)
- **ルーティング**: React Router

### バックエンド
- **既存のPoleNaviバックエンドを流用**
- Node.js + Express
- 新規エンドポイント追加: `POST /api/imada-lab/contact`

### APIエンドポイント仕様

#### POST /api/imada-lab/contact
お問い合わせ内容を受け取り、メール送信

**リクエストボディ**
```json
{
  "name": "山田太郎",
  "email": "yamada@example.com",
  "subject": "サービスについて",
  "message": "PoleNaviについて詳しく知りたいです..."
}
```

**バリデーション**
- name: 必須、1文字以上
- email: 必須、メール形式
- subject: 必須、1文字以上
- message: 必須、10文字以上

**レスポンス(成功時)**
```json
{
  "success": true,
  "message": "お問い合わせを送信しました"
}
```

**レスポンス(エラー時)**
```json
{
  "success": false,
  "error": "エラーメッセージ"
}
```

### メール送信
- **サービス**: Resend API
- **送信元**: noreply@imada-lab.com (または設定済みのアドレス)
- **送信先**: contact@imada-lab.com
- **注意**: imada-lab.comドメインのResend認証が必要

---

## ホスティング

### 環境
- **サーバー**: BMAX N95 (PoleNaviと同じ)
- **ドメイン**: imada-lab.com (別ドメイン)
- **公開方法**: Cloudflare Tunnel
- **プロセス管理**: PM2

### ディレクトリ構成(予定)
```
/home/imada/
  ├── polenavi/          # 既存
  │   ├── frontend/
  │   └── backend/
  └── imada-lab/         # 新規
      ├── frontend/
      └── (backend共通)
```

### デプロイ構成
1. **フロントエンド**: Viteでビルド、Nginxまたは静的配信
2. **バックエンド**: 既存PoleNaviバックエンドにエンドポイント追加
3. **PM2設定**: 既存の設定に追加

---

## 開発の優先順位

### Phase 1: 最小構成(MVP)
1. トップページ(サービスカード2つ)
2. お問い合わせページ(フォームのみ)
3. バックエンドAPIエンドポイント追加
4. 基本的なレスポンシブデザイン

### Phase 2: 必須ページ追加
1. プライバシーポリシーページ(とりあえず「準備中」)
2. 利用規約ページ(とりあえず「準備中」)
3. フッターにリンク追加

### Phase 3: 内容充実
1. プライバシーポリシーの内容作成
2. 利用規約の内容作成
3. デザインの洗練
4. サービスカードの画像追加

---

## 注意事項

### セキュリティ
- XSS対策: ユーザー入力のサニタイズ
- CSRF対策: トークン実装
- メール送信のレート制限: 同一IPから1時間に3件まで

### パフォーマンス
- 画像最適化(WebP形式推奨)
- Lazy Loading実装
- Lighthouseスコア80以上を目標

### アクセシビリティ
- セマンティックHTML使用
- キーボード操作対応
- alt属性の適切な設定

### SEO(後回し)
- メタタグ設定
- OGP設定
- sitemap.xml生成

---

## TODO(実装時にCode君が対応)

### フロントエンド
- [ ] プロジェクト初期化(Vite + React + TypeScript)
- [ ] ルーティング設定
- [ ] トップページ実装
  - [ ] ヘッダーコンポーネント
  - [ ] サービスカードコンポーネント
  - [ ] フッターコンポーネント
- [ ] お問い合わせページ実装
  - [ ] フォームコンポーネント
  - [ ] バリデーション
  - [ ] API連携
- [ ] プライバシーポリシーページ(準備中表示)
- [ ] 利用規約ページ(準備中表示)
- [ ] レスポンシブデザイン対応

### バックエンド
- [ ] `/api/imada-lab/contact` エンドポイント追加
- [ ] バリデーション実装
- [ ] Resend API連携(メール送信)
- [ ] レート制限実装
- [ ] エラーハンドリング

### インフラ
- [ ] Resendでimada-lab.comドメイン認証
- [ ] Cloudflare Tunnel設定
- [ ] PM2設定更新
- [ ] Nginx設定(必要に応じて)

### テスト
- [ ] フォーム送信テスト
- [ ] メール受信テスト
- [ ] レスポンシブテスト(各デバイス)
- [ ] バリデーションテスト

---

## 参考情報

### 類似サイト
- PoleNavi本サイト: https://polenavi.com
- 電気屋マイスター: https://denkiya-meister.com

### 技術スタック
- PoleNaviと同じ構成を踏襲
- 既存のコードベースを参考に実装

---

## 更新履歴
- 2025-11-18: 初版作成
